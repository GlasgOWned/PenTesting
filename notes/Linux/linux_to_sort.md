## Linux


# Curl through proxy (for burp):
```
-x, --proxy <[protocol://][user:password@]proxyhost[:port]>

curl --proxy http://localhost:8080 <URL>
```



# https://stackoverflow.com/questions/112396/how-do-i-remove-the-passphrase-for-the-ssh-key-without-having-to-create-a-new-ke
```
ssh-keygen -p [-P old_passphrase] [-N new_passphrase] [-f keyfile]
```

rlwrap (readline wrapper)
> rlwrap runs the specified command, intercepting user input in order to provide readline's line editing, persistent history and completion.


https://stackoverflow.com/questions/28878995/check-if-a-field-is-an-integer-in-awk
```
cat full_nmap.nmap | awk -F"/" '$1 ~ /^[0-9]+$/ {print $1}'
cat full_nmap.nmap | awk -F"/" '$1 ~ /^[0-9]+$/ {print $1}'|tr '\n' ','
cat full_nmap.nmap | awk -F"/" '$1 ~ /^[0-9]+$/ {print $1}'|tr '\n' ','| rev | cut -c 2- | rev
```


get full path (useful in conjunction with find function):
```
root@kali:~/Documents/github# find . -name "*.pdf" -exec readlink -f {} \;
/root/Documents/github/CTF_notes/2019-KringleCon/Documents/LetterToElfUPersonnel.pdf
```

```
find path_to_files/* -type f -print0 |xargs -0 file -i|grep application/octet-stream|awk -F ":" '{ print $1 }'|xargs rm
```


Open file from terminal:
```
# generic
xdg-open filename.xxxx

# until Xenial (16.04):
gvfs-open file2open.xxx

# starting with Artful (17.10):
gio open file2open.xxx
```


"Colorize" output
```
# install pygments python package
pip install Pygments

alias ccat='pygmentize -O bg=dark,style=colorful'
```

Compare contents of two files
```
comm [-1] [-2] [-3] file1 file2
-1 Suppress the output column of lines unique to file1
-2 Suppress the output column of lines unique to file2
-3 Suppress the output column of lines duplicated in file1 and file2
```

# Date formatting
```
date --date='TZ="America/New_York" 9:00'
date --date='TZ="America/New_York" 9:00 PM'
date +%m/%d/%Y\ %H:%M
```

Find symlinks:
```
find . -type l -user `whoami` 2>/dev/null
```

Return 2nd column from tab delimited file:
```
cat filename | cut -f2 -d$'\t'
```

Remove leading spaces:
```
echo "      this is a test" | sed -e "s/^[ \t]*//"
```

Find all files containing specific text:
```
grep -rnw 'path/to/somewhere' -e 'pattern'
```


padding within bash
```bash
for i in $(seq -f "%05g" 10 15)
do
  echo $i
done
```


#### Print 1st column:
```
$ cut -d' ' -f1  <<< "12/12/2013 14:32"
12/12/2013

$ awk '{print $1}' <<< "12/12/2013 14:32"
12/12/2013

$ sed 's/ .*//' <<< "12/12/2013 14:32"
12/12/2013

$ grep -o "^\S\+"  <<< "12/12/2013 14:32"
12/12/2013

$ perl -lane 'print $F[0]' <<< "12/12/2013 14:32"
12/12/2013
```



find ./ -type d -empty -delete
find ./ -type f -size 0 -delete



Bash - get chr and ord functions:
```
chr() {
  [ "$1" -lt 256 ] || return 1
  printf "\\$(printf '%03o' "$1")"
}

ord() {
  LC_CTYPE=C printf '%d' "'$1"
}
```
Example:
```
chr 65
```
`Result: A`


Curl - resolve hostname:
`curl --resolve 'yada.com:80:127.0.0.1' http://yada.com/something`
https://stackoverflow.com/questions/3390549/set-curl-to-use-local-virtual-hosts


Grep for line of a specific length:
https://unix.stackexchange.com/questions/184519/how-to-grep-for-line-length-in-a-given-range
```
grep -x '.\{3,10\}'

     -x match pattern to whole line
     . any symbol
     {3,10} quantify from 3 to 10 times previous symbol
```



https://stackoverflow.com/questions/11967776/swap-two-columns-awk-sed-python-perl
```
awk ' { t = $1; $1 = $2; $2 = t; print; } ' input_file
```


awk:
https://stackoverflow.com/questions/13046167/printing-the-last-column-of-a-line-in-a-file
Print last column of a line containing "A1"
```
awk '/A1/ {print $NF}' file
```


Copy files using ssh identity file:
```
#send to remote host:
scp -i KEYFILE FILENAME USER@SERVER:/home/USER/FILENAME

#pull from remote host (save locally):
scp -i KEYFILE USER@SERVER:/home/USER/FILENAME /home/USER/FILENAME
```


Get Path of file/directory (Linux):
```
readlink -f filename

realpath filename
```


Open images from terminal
```shell
eog filename

display filename # from ImageMagick
```


Parse Markdown (e.g., README.md):
```
pandoc -t html README.md | lynx -stdin
pandoc -f gfm -t html5 README.md
```

url decode within bash:
```
function urldecode() { : "${*//+/ }"; echo -e "${_//%/\\x}"; }
```
